<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maleks SWAP - Currency Converter with Live Market Data</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üí±</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .page-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 24px;
        }

        .main-content {
            min-width: 0;
        }

        .sidebar {
            position: sticky;
            top: 20px;
            height: fit-content;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            grid-column: 1 / -1;
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 1rem;
            color: #64748b;
            font-weight: 400;
        }

        .main-card {
            background: white;
            border-radius: 12px;
            padding: 32px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            margin-bottom: 24px;
        }

        .sidebar-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            margin-bottom: 16px;
        }

        .sidebar-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stock-item, .gold-item {
            padding: 12px;
            border-radius: 8px;
            background: #f8fafc;
            margin-bottom: 8px;
            transition: all 0.15s ease;
        }

        .stock-item:hover, .gold-item:hover {
            background: #f1f5f9;
            transform: translateX(2px);
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
        }

        .stock-symbol {
            font-weight: 600;
            color: #0f172a;
            font-size: 0.875rem;
        }

        .stock-name {
            font-size: 0.75rem;
            color: #64748b;
            margin-bottom: 6px;
        }

        .stock-price {
            font-size: 1.125rem;
            font-weight: 600;
            color: #0f172a;
        }

        .stock-change {
            font-size: 0.75rem;
            font-weight: 500;
            padding: 2px 6px;
            border-radius: 4px;
        }

        .change-positive {
            color: #16a34a;
            background: #dcfce7;
        }

        .change-negative {
            color: #dc2626;
            background: #fee2e2;
        }

        .gold-price {
            font-size: 1.5rem;
            font-weight: 700;
            color: #f59e0b;
            margin-bottom: 8px;
        }

        .gold-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 8px;
            font-size: 0.875rem;
        }

        .gold-detail-item {
            background: #fffbeb;
            padding: 8px;
            border-radius: 6px;
            text-align: center;
        }

        .gold-detail-label {
            font-size: 0.75rem;
            color: #92400e;
            margin-bottom: 2px;
        }

        .gold-detail-value {
            font-weight: 600;
            color: #78350f;
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 32px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #0f172a;
        }

        .refresh-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: background-color 0.15s ease;
        }

        .refresh-btn:hover {
            background: #2563eb;
        }

        .refresh-btn:disabled {
            background: #94a3b8;
            cursor: not-allowed;
        }

        .converter-section {
            display: grid;
            grid-template-columns: 1fr auto 1fr;
            gap: 24px;
            align-items: end;
            margin-bottom: 32px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .input-label {
            font-size: 0.875rem;
            font-weight: 500;
            color: #475569;
        }

        .amount-input, .currency-select {
            padding: 12px;
            border: 1px solid #cbd5e1;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: all 0.15s ease;
            background: white;
        }

        .amount-input:focus, .currency-select:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .swap-btn {
            background: #f1f5f9;
            border: 1px solid #cbd5e1;
            color: #475569;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.25rem;
            transition: all 0.15s ease;
            margin-bottom: 8px;
        }

        .swap-btn:hover {
            background: #e2e8f0;
            transform: rotate(180deg);
        }

        .result-section {
            background: #f8fafc;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 24px;
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .result-title {
            font-size: 0.875rem;
            font-weight: 500;
            color: #64748b;
        }

        .result-change {
            font-size: 0.75rem;
            font-weight: 500;
            padding: 4px 8px;
            border-radius: 4px;
        }

        .change-neutral {
            color: #64748b;
            background: #f1f5f9;
        }

        .result-value {
            font-size: 2rem;
            font-weight: 700;
            color: #0f172a;
            margin-bottom: 8px;
        }

        .result-rate {
            font-size: 0.875rem;
            color: #64748b;
        }

        .rates-section {
            background: white;
            border-radius: 12px;
            padding: 32px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            border: 1px solid #e2e8f0;
            margin-bottom: 24px;
        }

        .rates-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #0f172a;
            margin-bottom: 20px;
        }

        .rates-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 12px;
        }

        .rate-item {
            background: #f8fafc;
            padding: 12px;
            border-radius: 8px;
            transition: all 0.15s ease;
        }

        .rate-item:hover {
            background: #f1f5f9;
            transform: translateY(-2px);
        }

        .rate-pair {
            font-size: 0.75rem;
            color: #64748b;
            margin-bottom: 4px;
        }

        .rate-value {
            font-size: 1rem;
            font-weight: 600;
            color: #0f172a;
        }

        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            font-size: 0.875rem;
            color: #64748b;
            flex-wrap: wrap;
            gap: 12px;
        }

        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #22c55e;
            border-radius: 50%;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        @media (max-width: 1024px) {
            .page-container {
                grid-template-columns: 1fr;
            }

            .sidebar {
                position: static;
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                gap: 16px;
            }

            .header h1 {
                font-size: 2.25rem;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 12px;
            }

            .header {
                margin-bottom: 24px;
            }
            
            .header h1 {
                font-size: 1.875rem;
            }

            .header p {
                font-size: 0.875rem;
            }

            .main-card, .rates-section, .sidebar-card {
                padding: 20px;
                border-radius: 16px;
            }

            .converter-section {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .swap-btn {
                transform: rotate(90deg);
                padding: 16px;
                font-size: 1.5rem;
                min-height: 56px;
                min-width: 56px;
            }
            
            .swap-btn:hover {
                transform: rotate(270deg);
            }

            .amount-input, .currency-select {
                padding: 16px;
                font-size: 1.125rem;
                min-height: 56px;
            }

            .refresh-btn {
                padding: 12px 20px;
                font-size: 1rem;
                min-height: 48px;
            }

            .card-title {
                font-size: 1.25rem;
            }

            .result-section {
                padding: 20px;
                border-radius: 12px;
            }
            
            .result-value {
                font-size: 1.75rem;
            }

            .result-rate {
                font-size: 1rem;
            }

            .rates-title {
                font-size: 1.125rem;
            }

            .rates-grid {
                grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
                gap: 10px;
            }

            .rate-item {
                padding: 14px;
            }

            .sidebar {
                grid-template-columns: 1fr;
            }

            .sidebar-title {
                font-size: 1.125rem;
            }

            .stock-item, .gold-item {
                padding: 14px;
            }

            .stock-price {
                font-size: 1.25rem;
            }

            .gold-price {
                font-size: 1.75rem;
            }

            .footer {
                font-size: 0.8125rem;
                padding: 12px 0;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 8px;
            }

            .header h1 {
                font-size: 1.5rem;
            }

            .header p {
                font-size: 0.8125rem;
            }

            .main-card, .rates-section, .sidebar-card {
                padding: 16px;
            }

            .card-header {
                margin-bottom: 20px;
            }

            .converter-section {
                gap: 16px;
            }

            .result-value {
                font-size: 1.5rem;
            }

            .rates-grid {
                grid-template-columns: 1fr 1fr;
                gap: 8px;
            }

            .rate-item {
                padding: 12px;
            }

            .rate-pair {
                font-size: 0.6875rem;
            }

            .rate-value {
                font-size: 0.9375rem;
            }

            .stock-item, .gold-item {
                padding: 12px;
            }

            .gold-details {
                gap: 6px;
            }
        }
    </style>
</head>
<body>
    <div class="page-container">
        <div class="header">
            <h1>üí± Maleks SWAP</h1>
            <p>Fast cryptocurrency converter with live market data</p>
        </div>

        <div class="main-content">
            <div class="main-card">
                <div class="card-header">
                    <h2 class="card-title">Currency Converter</h2>
                    <button class="refresh-btn" onclick="refreshRates()" id="refreshBtn">
                        Refresh
                    </button>
                </div>

                <div class="converter-section">
                    <div class="input-group">
                        <label class="input-label">Amount</label>
                        <input type="number" class="amount-input" id="amountInput" placeholder="Enter amount" value="1" min="0" step="any">
                        <label class="input-label">From</label>
                        <select class="currency-select" id="fromSelect">
                            <option value="USDT">üü¢ USDT (Tether)</option>
                            <option value="USDC">üîµ USDC (USD Coin)</option>
                            <option value="USD">üá∫üá∏ USD (US Dollar)</option>
                            <option value="EUR">üá™üá∫ EUR (Euro)</option>
                            <option value="GBP">üá¨üáß GBP (British Pound)</option>
                            <option value="AED">üá¶üá™ AED (UAE Dirham)</option>
                        </select>
                    </div>

                    <button class="swap-btn" onclick="swapCurrencies()">‚áÑ</button>

                    <div class="input-group">
                        <label class="input-label">Result</label>
                        <input type="text" class="amount-input" id="resultInput" readonly>
                        <label class="input-label">To</label>
                        <select class="currency-select" id="toSelect">
                            <option value="USD">üá∫üá∏ USD (US Dollar)</option>
                            <option value="EUR">üá™üá∫ EUR (Euro)</option>
                            <option value="GBP">üá¨üáß GBP (British Pound)</option>
                            <option value="AED">üá¶üá™ AED (UAE Dirham)</option>
                            <option value="USDT">üü¢ USDT (Tether)</option>
                            <option value="USDC">üîµ USDC (USD Coin)</option>
                        </select>
                    </div>
                </div>

                <div class="result-section">
                    <div class="result-header">
                        <div class="result-title" id="resultTitle">
                            <span id="resultFlag">üá∫üá∏</span>
                            Conversion Result
                        </div>
                        <div class="result-change change-neutral" id="resultChange">No change</div>
                    </div>
                    <div class="result-value" id="resultValue">
                        <span id="resultValueFlag">üá∫üá∏</span>
                        $1
                    </div>
                    <div class="result-rate" id="resultRate">1 USDT = 1.0000 USD</div>
                </div>
            </div>

            <div class="rates-section">
                <h3 class="rates-title">Exchange Rates</h3>
                <div class="rates-grid" id="ratesMatrix">
                    <!-- Rates matrix will be populated by JavaScript -->
                </div>
            </div>

            <div class="footer">
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span>Live data - updates every 5 seconds</span>
                </div>
                <div id="footerUpdate">Last updated: Loading...</div>
            </div>
        </div>

        <div class="sidebar">
            <div class="sidebar-card">
                <h3 class="sidebar-title">üìà Major Stocks</h3>
                <div id="stocksList">
                    <!-- Stocks will be populated by JavaScript -->
                </div>
            </div>

            <div class="sidebar-card">
                <h3 class="sidebar-title">üèÜ Gold Price</h3>
                <div class="gold-item">
                    <div class="gold-price" id="goldPrice">$4,130.00</div>
                    <div class="stock-change change-negative" id="goldChange">-0.09%</div>
                    <div class="gold-details">
                        <div class="gold-detail-item">
                            <div class="gold-detail-label">Per Oz</div>
                            <div class="gold-detail-value" id="goldPerOz">$4,130</div>
                        </div>
                        <div class="gold-detail-item">
                            <div class="gold-detail-label">Per Gram</div>
                            <div class="gold-detail-value" id="goldPerGram">$132.79</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Exchange rates
        const exchangeRates = {
            USD: 1.0000,
            EUR: 0.8519,
            GBP: 0.7635,
            AED: 3.6725,
            USDT: 1.0000,
            USDC: 0.9996
        };

        // 24h changes
        const changes24h = {
            USD: 0.00,
            EUR: -0.04,
            GBP: -0.04,
            AED: 0.00,
            USDT: -0.04,
            USDC: 0.00
        };

        // Currency metadata
        const currencyData = {
            USD: { name: 'US Dollar', symbol: '$', flag: 'üá∫üá∏', color: '#22c55e' },
            EUR: { name: 'Euro', symbol: '‚Ç¨', flag: 'üá™üá∫', color: '#3b82f6' },
            GBP: { name: 'British Pound', symbol: '¬£', flag: 'üá¨üáß', color: '#8b5cf6' },
            AED: { name: 'UAE Dirham', symbol: 'ÿØ.ÿ•', flag: 'üá¶üá™', color: '#f59e0b' },
            USDT: { name: 'Tether', symbol: '$', flag: 'üü¢', color: '#10b981' },
            USDC: { name: 'USD Coin', symbol: '$', flag: 'üîµ', color: '#0ea5e9' }
        };

        // Stock data
        const stockData = {
            AAPL: { name: 'Apple Inc.', price: 189.50, change: 1.25 },
            GOOGL: { name: 'Alphabet Inc.', price: 142.30, change: -0.45 },
            MSFT: { name: 'Microsoft Corp.', price: 378.90, change: 0.85 },
            TSLA: { name: 'Tesla Inc.', price: 242.15, change: 2.10 },
            AMZN: { name: 'Amazon.com Inc.', price: 178.25, change: -0.30 }
        };

        // Gold data
        let goldData = {
            pricePerOz: 4130.00,
            change: -0.09
        };

        // Cached DOM elements
        const elements = {
            amountInput: null,
            fromSelect: null,
            toSelect: null,
            resultInput: null,
            resultTitle: null,
            resultValue: null,
            resultRate: null,
            resultChange: null,
            resultFlag: null,
            resultValueFlag: null,
            ratesMatrix: null,
            footerUpdate: null,
            refreshBtn: null,
            stocksList: null,
            goldPrice: null,
            goldChange: null,
            goldPerOz: null,
            goldPerGram: null
        };

        let updateInterval;
        let isLoading = false;

        // Cache DOM elements
        function cacheElements() {
            elements.amountInput = document.getElementById('amountInput');
            elements.fromSelect = document.getElementById('fromSelect');
            elements.toSelect = document.getElementById('toSelect');
            elements.resultInput = document.getElementById('resultInput');
            elements.resultTitle = document.getElementById('resultTitle');
            elements.resultValue = document.getElementById('resultValue');
            elements.resultRate = document.getElementById('resultRate');
            elements.resultChange = document.getElementById('resultChange');
            elements.resultFlag = document.getElementById('resultFlag');
            elements.resultValueFlag = document.getElementById('resultValueFlag');
            elements.ratesMatrix = document.getElementById('ratesMatrix');
            elements.footerUpdate = document.getElementById('footerUpdate');
            elements.refreshBtn = document.getElementById('refreshBtn');
            elements.stocksList = document.getElementById('stocksList');
            elements.goldPrice = document.getElementById('goldPrice');
            elements.goldChange = document.getElementById('goldChange');
            elements.goldPerOz = document.getElementById('goldPerOz');
            elements.goldPerGram = document.getElementById('goldPerGram');
        }

        // Update rates
        function updateRates() {
            if (isLoading) return;
            
            const baseRates = {
                EUR: 0.8519,
                GBP: 0.7635,
                AED: 3.6725,
                USDT: 1.0000,
                USDC: 0.9996
            };

            for (const currency in baseRates) {
                const baseRate = baseRates[currency];
                const maxFluctuation = currency.startsWith('USD') ? 0.001 : 0.002;
                const fluctuation = (Math.random() - 0.5) * maxFluctuation;
                exchangeRates[currency] = Math.max(0.001, baseRate + fluctuation);
                
                const randomChange = (Math.random() - 0.5) * 0.1;
                changes24h[currency] = Math.max(-2, Math.min(2, 
                    changes24h[currency] * 0.95 + randomChange * 0.05
                ));
            }
            
            updateDisplay();
            updateRatesMatrix();
            updateStocks();
            updateGold();
        }

        // Update stocks
        function updateStocks() {
            const stocks = Object.keys(stockData);
            stocks.forEach(symbol => {
                const fluctuation = (Math.random() - 0.5) * 2;
                stockData[symbol].change = Math.max(-5, Math.min(5,
                    stockData[symbol].change * 0.95 + fluctuation * 0.05
                ));
                stockData[symbol].price *= (1 + stockData[symbol].change / 100 * 0.01);
            });

            const html = stocks.map(symbol => {
                const stock = stockData[symbol];
                const changeClass = stock.change >= 0 ? 'change-positive' : 'change-negative';
                const changeSymbol = stock.change >= 0 ? '+' : '';
                return `
                    <div class="stock-item">
                        <div class="stock-header">
                            <span class="stock-symbol">${symbol}</span>
                            <span class="stock-change ${changeClass}">${changeSymbol}${stock.change.toFixed(2)}%</span>
                        </div>
                        <div class="stock-name">${stock.name}</div>
                        <div class="stock-price">$${stock.price.toFixed(2)}</div>
                    </div>
                `;
            }).join('');

            elements.stocksList.innerHTML = html;
        }

        // Update gold
        function updateGold() {
            const fluctuation = (Math.random() - 0.5) * 0.5;
            goldData.change = Math.max(-2, Math.min(2,
                goldData.change * 0.95 + fluctuation * 0.05
            ));
            goldData.pricePerOz *= (1 + goldData.change / 100 * 0.01);

            const pricePerGram = goldData.pricePerOz / 31.1035;
            const changeClass = goldData.change >= 0 ? 'change-positive' : 'change-negative';
            const changeSymbol = goldData.change >= 0 ? '+' : '';

            elements.goldPrice.textContent = `$${goldData.pricePerOz.toFixed(2)}`;
            elements.goldChange.textContent = `${changeSymbol}${goldData.change.toFixed(2)}%`;
            elements.goldChange.className = `stock-change ${changeClass}`;
            elements.goldPerOz.textContent = `$${Math.round(goldData.pricePerOz)}`;
            elements.goldPerGram.textContent = `$${pricePerGram.toFixed(2)}`;
        }

        // Convert currency
        function convert(amount, fromCurrency, toCurrency) {
            if (fromCurrency === toCurrency) return amount;
            
            const usdAmount = fromCurrency === 'USD' ? amount : amount / exchangeRates[fromCurrency];
            return toCurrency === 'USD' ? usdAmount : usdAmount * exchangeRates[toCurrency];
        }

        // Update display
        function updateDisplay() {
            const amount = parseFloat(elements.amountInput.value) || 1;
            const fromCurrency = elements.fromSelect.value;
            const toCurrency = elements.toSelect.value;
            
            const convertedAmount = convert(amount, fromCurrency, toCurrency);
            const rate = convert(1, fromCurrency, toCurrency);
            
            const fromData = currencyData[fromCurrency];
            const toData = currencyData[toCurrency];
            
            const roundedAmount = Math.round(convertedAmount);
            elements.resultInput.value = toData.symbol + roundedAmount.toLocaleString('en-US');
            
            elements.resultTitle.innerHTML = `<span>${toData.flag}</span> ${amount} ${fromCurrency} = ${roundedAmount} ${toCurrency}`;
            elements.resultValue.innerHTML = `<span>${toData.flag}</span> ${toData.symbol}${roundedAmount.toLocaleString('en-US')}`;
            elements.resultRate.textContent = `1 ${fromCurrency} = ${rate.toFixed(4)} ${toCurrency}`;
            
            elements.resultFlag.textContent = toData.flag;
            elements.resultValueFlag.textContent = toData.flag;
            
            const change = changes24h[toCurrency] || 0;
            const changeText = change === 0 ? 'No change' : 
                (change > 0 ? `+${change.toFixed(2)}%` : `${change.toFixed(2)}%`);
            const changeClass = change > 0 ? 'change-positive' : change < 0 ? 'change-negative' : 'change-neutral';
            
            elements.resultChange.textContent = changeText;
            elements.resultChange.className = `result-change ${changeClass}`;
            
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-US', {
                hour12: true,
                hour: 'numeric',
                minute: '2-digit',
                second: '2-digit'
            });
            elements.footerUpdate.textContent = 'Last updated: ' + timeString;
        }

        // Update rates matrix
        function updateRatesMatrix() {
            const fragment = document.createDocumentFragment();
            const currencies = ['USD', 'EUR', 'GBP', 'AED', 'USDT', 'USDC'];
            
            currencies.forEach(from => {
                currencies.forEach(to => {
                    if (from !== to) {
                        const rate = convert(1, from, to);
                        const fromData = currencyData[from];
                        const toData = currencyData[to];
                        
                        const rateItem = document.createElement('div');
                        rateItem.className = 'rate-item';
                        rateItem.innerHTML = `
                            <div class="rate-pair">${fromData.flag} ${from} ‚Üí ${toData.flag} ${to}</div>
                            <div class="rate-value">${rate.toFixed(4)}</div>
                        `;
                        fragment.appendChild(rateItem);
                    }
                });
            });
            
            elements.ratesMatrix.innerHTML = '';
            elements.ratesMatrix.appendChild(fragment);
        }

        // Swap currencies
        function swapCurrencies() {
            const temp = elements.fromSelect.value;
            elements.fromSelect.value = elements.toSelect.value;
            elements.toSelect.value = temp;
            updateDisplay();
        }

        // Refresh rates
        function refreshRates() {
            if (isLoading) return;
            
            isLoading = true;
            elements.refreshBtn.disabled = true;
            elements.refreshBtn.textContent = 'Refreshing...';
            document.querySelector('.main-card').classList.add('loading');
            
            setTimeout(() => {
                updateRates();
                isLoading = false;
                elements.refreshBtn.disabled = false;
                elements.refreshBtn.textContent = 'Refresh';
                document.querySelector('.main-card').classList.remove('loading');
            }, 500);
        }

        // Setup event listeners
        function setupEventListeners() {
            elements.amountInput.addEventListener('input', updateDisplay, { passive: true });
            elements.fromSelect.addEventListener('change', updateDisplay, { passive: true });
            elements.toSelect.addEventListener('change', updateDisplay, { passive: true });
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            cacheElements();
            setupEventListeners();
            updateDisplay();
            updateRatesMatrix();
            updateStocks();
            updateGold();
            
            // Set update interval to 5 seconds
            updateInterval = setInterval(updateRates, 5000);
        });

        // Cleanup
        window.addEventListener('beforeunload', function() {
            if (updateInterval) {
                clearInterval(updateInterval);
            }
        }, { passive: true });
    </script>
</body>
</html>

